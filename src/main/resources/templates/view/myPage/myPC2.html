<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PC 등록</title>
    <!-- 부트스트랩 CSS 로드 -->
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
    <!-- jQuery 로드 -->
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <!-- 부트스트랩 JS 로드 -->
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/common/common.css"/>
    <link rel="stylesheet" type="text/css" href="/css/common/sectionCss.css" />
    <link rel="stylesheet" type="text/css" href="/css/myPage/regList.css" />
    <!-- 분리된 CSS 파일 연결 -->
    <link rel="stylesheet" th:href="@{/css/myPage/courseRegCss.css}" />
    <link rel="stylesheet" th:href="@{/css/myPage/sectionCss.css}" />
    <script>
        function confirmRegistration(form) {
            if (confirm('현재 사용중인 PC를 등록하시겠습니까?')) {
                form.submit(); // 확인을 누르면 폼 제출
            } else {
                return false; // 취소를 누르면 폼 제출 방지
            }
        }

        function showAlert(message) {
            alert(message);
        }
    </script>
</head>
<body>
<header>
    <!-- 상단 네비바 삽입 -->
    <header th:replace="~{layout/header :: header}"></header>
</header>

<!-- aside와 main을 포함한 container1을 flexbox로 만들어 둘을 가로로 나란히 배치 -->
<div class="container1">
    <aside>
        <!-- 사이드바 삽입 -->
        <nav th:replace="~{layout/sidebar :: sidebar}"></nav>
    </aside>

    <main style="height: 1000px">
        <!-- 컨텐츠 삽입 -->
        <div class="miniNavi">
            <h1>PC 등록</h1>
        </div>
        <!-- 부트스트랩 컨테이너로 전체를 감쌈 -->
        <div class="container mt-5">
            <div class="row justify-content-center">
                <div class="col-md-9">
                    <div class="card text-center"> <!-- text-center 클래스를 추가하여 가운데 정렬 -->
                        <div class="card-body">
                            <div class="alert alert-info">
                                <p>같은 PC는 한 번만 등록할 수 있습니다.</p>
                                <p>등록된 PC가 아니면 다른 PC를 삭제할 수 없습니다.</p>
                                <p>PC는 3개 까지만 등록이 가능합니다.</p>
                            </div>
                            <form method="post" action="/registerPC" onsubmit="return confirmRegistration(this);">
                                <div class="form-group">
                                    <label for="mipName">PC 이름</label>
                                    <input type="text" class="form-control" id="mipName" name="mipName" placeholder="PC 이름" required>
                                </div>
                                <button type="submit" class="btn btn-primary">현재 PC 등록</button>
                            </form>
                            <ul class="list-group mt-4">
                                <th:block th:each="ip : ${myPCList}">
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <span>PC 이름: <span th:text="${ip.mipName}"></span></span>
                                        <form method="post" action="/deletePC" onsubmit="return confirm('정말로 이 PC를 삭제하시겠습니까?');" class="ml-auto">
                                            <input type="hidden" name="mipId" th:value="${ip.mipId}" />
                                            <button type="submit" class="btn btn-danger btn-sm">삭제</button>
                                        </form>
                                    </li>
                                </th:block>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
</div>

<footer>
    <!-- 푸터 삽입 -->
    <footer th:replace="~{layout/footer :: footer}"></footer>
</footer>

<!-- 성공 또는 오류 메시지를 표시하기 위한 스크립트 -->
<script th:inline="javascript">
    /*<![CDATA[*/
    (function() {
        var message = /*[[${message != null}]]*/ false ? '/*[[${message}]]*/' : null;
        if (message) {
            showAlert('[[${message}]]');
        }
    })();
    /*]]>*/
</script>
</body>
</html>