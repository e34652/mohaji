<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PC 등록</title>
    <!-- jQuery 로드 -->
    <script src="/webjars/jquery/3.6.0/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/common/common.css"/>
    <link rel="stylesheet" type="text/css" href="/css/common/sectionCss.css" />
    <link rel="stylesheet" type="text/css" href="/css/myPage/regList.css" />
    <!-- 분리된 CSS 파일 연결 -->
    <link rel="stylesheet" th:href="@{/css/myPage/courseRegCss.css}" />
    <link rel="stylesheet" th:href="@{/css/myPage/sectionCss.css}" />
    <script>
        function confirmRegistration(form) {
            if (confirm('현재 사용중인 PC를 등록하시겠습니까?')) {
                form.submit(); // 확인을 누르면 폼 제출
            } else {
                return false; // 취소를 누르면 폼 제출 방지
            }
        }

        function showAlert(message) {
            alert(message);
        }
    </script>
</head>
<body>
<header>
    <!-- 상단 네비바 삽입 -->
    <header th:replace="~{layout/header :: header}"></header>
</header>

<!-- aside와 main을 포함한 container1을 flexbox로 만들어 둘을 가로로 나란히 배치 -->
<div class="container1">
    <aside>
        <!-- 사이드바 삽입 -->
        <nav th:replace="~{layout/sidebar :: sidebar}"></nav>
    </aside>

    <main style="height: 1000px">
        <!-- 컨텐츠 삽입 -->
        <div class="miniNavi">
            <h1>PC 등록</h1>
        </div>
        <!-- PC 등록 버튼 -->
        <div>
            <span>
                <p>같은 PC는 한 번만 등록할 수 있습니다.</p>
                <p>등록된 PC가 아니면 다른 PC를 삭제할 수 없습니다.</p>
                <p>PC는 3개 까지만 등록이 가능합니다.</p>
            </span>
            <form method="post" action="/registerPC" onsubmit="return confirmRegistration(this);">
                <!-- PC 이름 입력 필드 -->
                <input type="text" name="mipName" placeholder="PC 이름" required>
                <!-- 등록 버튼 -->
                <button type="submit">현재 PC 등록</button>
            </form>
        </div>
        <!-- IP 목록 렌더링 -->
        <th:block th:each="ip : ${myPCList}">
            <li>
                PC 이름: <span th:text="${ip.mipName}"></span>
                <form method="post" action="/deletePC" onsubmit="return confirm('정말로 이 PC를 삭제하시겠습니까?');">
                    <input type="hidden" name="mipId" th:value="${ip.mipId}" />
                    <button type="submit">삭제</button>
                </form>
            </li>
        </th:block>
    </main>
    <footer>
        <!-- 푸터 삽입 -->
        <footer th:replace="~{layout/footer :: footer}"></footer>
    </footer>
</div>

<!--스크립트부분-->
<script th:inline="javascript">
    /*<![CDATA[*/
    (function() {
        var message = /*[[${message != null}]]*/ false ? '/*[[${message}]]*/' : null;
        if (message) {
            showAlert(message);
        }
    })();
    /*]]>*/
</script>
</body>
</html>